{{/*
  consortium-leadership.html — renders the leadership grid for the About,
  Board of Directors and Executive Council pages.

  Reads the `leadership` front-matter list from the parent page and
  automatically separates current roles (no `till`) from past ones.

  Front-matter shape:
    leadership:
      - name:        Paul van Brouwershaven
        role:        Chair                    # consortium/positional role label
        affiliation: digitorus               # member ID (optional — auto-lookup if omitted)
        from:        2021-01-01              # ISO date when this role started
      - name:        Kirk Hall
        role:        Chair
        affiliation: entrust
        from:        2013-02-14
        till:        2021-01-01             # presence marks this as a past role

  Rendering is delegated to the generic `person-card.html` partial which
  can also be used on event, speaker or other pages.
*/}}

{{- $leaders := .Page.Params.leadership -}}
{{- if not $leaders }}{{- return -}}{{- end -}}

{{- $current := slice -}}
{{- $past    := slice -}}
{{- range $leaders -}}
  {{- if .till -}}
    {{- $past = $past | append . -}}
  {{- else -}}
    {{- $current = $current | append . -}}
  {{- end -}}
{{- end -}}

{{/* ── Current leaders ──────────────────────────────────────────────────── */}}
{{- if $current -}}
<div class="consortium-leaders">
  {{- range $current -}}
    {{- partial "person-card.html" . -}}
  {{- end -}}
</div>
{{- end -}}

{{/* ── Past leaders — timeline ───────────────────────────────────────────── */}}
{{- if $past -}}
<div class="consortium-past-leadership">
  <h4 class="consortium-past-heading">Past positions</h4>
  <div class="consortium-past-timeline">
    {{- range $past -}}
      {{- partial "person-card.html" (merge . (dict "mode" "timeline" "size" "md")) -}}
    {{- end -}}
  </div>
</div>
{{- end -}}

