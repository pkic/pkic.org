mermaid.initialize({
  startOnLoad: true,
  theme: 'base',
  themeVariables: {
    background:           'transparent',
    mainBkg:              'transparent',
    primaryColor:         '#1e3f7a',
    primaryTextColor:     '#ffffff',
    primaryBorderColor:   '#4a7fd4',
    secondaryColor:       '#0d5c52',
    secondaryTextColor:   '#ffffff',
    secondaryBorderColor: '#1a9e8a',
    tertiaryColor:        '#3b2472',
    tertiaryTextColor:    '#ffffff',
    tertiaryBorderColor:  '#7c52d4',
    lineColor:            '#6b7280',
    nodeBorder:           '#4a7fd4',
    clusterBkg:           'rgba(255,255,255,0.05)',
    clusterBorder:        '#4b5563',
    edgeLabelBackground:  'rgba(30,40,60,0.8)',
    titleColor:           '#f0f6fc',
    labelBoxBkgColor:     'rgba(30,40,60,0.8)',
    labelBoxBorderColor:  '#4b5563',
    labelTextColor:       '#ffffff',
    loopTextColor:        '#ffffff',
    noteBkgColor:         'rgba(30,40,60,0.8)',
    noteTextColor:        '#f0f6fc',
    activationBkgColor:   '#1e3f7a',
    activationBorderColor:'#4a7fd4',
    sequenceNumberColor:  '#ffffff',
    // Mindmap/pie section fills (leaf nodes)
    cScale0:              '#2f5fc7',   // steel blue
    cScale1:              '#1a8a77',   // teal
    cScale2:              '#6b42c8',   // indigo
    cScale3:              '#1f7a4a',   // emerald
    cScale4:              '#7b35a0',   // violet
    cScale5:              '#1c6f8a',   // slate-cyan
    cScale6:              '#8a5a0d',   // warm amber
    cScale7:              '#8a2a40',   // burgundy
    cScale8:              '#2f5fc7',
    cScale9:              '#1a8a77',
    cScale10:             '#6b42c8',
    cScale11:             '#1f7a4a',
    // Peer colors â€” level-1 connector nodes (hexagons etc.)
    // Set to same hue, slightly lighter than cScale
    cScalePeer0:          '#4472d4',
    cScalePeer1:          '#22a896',
    cScalePeer2:          '#7f58d4',
    cScalePeer3:          '#279660',
    cScalePeer4:          '#9645b8',
    cScalePeer5:          '#2489a8',
    cScalePeer6:          '#a87020',
    cScalePeer7:          '#a83a55',
    cScalePeer8:          '#4472d4',
    cScalePeer9:          '#22a896',
    cScalePeer10:         '#7f58d4',
    cScalePeer11:         '#279660',
    cScaleLabel0:         '#ffffff',
    cScaleLabel1:         '#ffffff',
    cScaleLabel2:         '#ffffff',
    cScaleLabel3:         '#ffffff',
    cScaleLabel4:         '#ffffff',
    cScaleLabel5:         '#ffffff',
    cScaleLabel6:         '#ffffff',
    cScaleLabel7:         '#ffffff',
    cScaleLabel8:         '#ffffff',
    cScaleLabel9:         '#ffffff',
    cScaleLabel10:        '#ffffff',
    cScaleLabel11:        '#ffffff',
    cScalePeerLabel0:     '#ffffff',
    cScalePeerLabel1:     '#ffffff',
    cScalePeerLabel2:     '#ffffff',
    cScalePeerLabel3:     '#ffffff',
    cScalePeerLabel4:     '#ffffff',
    cScalePeerLabel5:     '#ffffff',
    cScalePeerLabel6:     '#ffffff',
    cScalePeerLabel7:     '#ffffff',
    cScalePeerLabel8:     '#ffffff',
    cScalePeerLabel9:     '#ffffff',
    cScalePeerLabel10:    '#ffffff',
    cScalePeerLabel11:    '#ffffff',
    fontFamily:           'system-ui,-apple-system,"Segoe UI",sans-serif',
    fontSize:             '14px',
  },
  flowchart: { curve: 'basis', useMaxWidth: true, htmlLabels: true },
  sequence:  { useMaxWidth: true, mirrorActors: false },
  mindmap:   { useMaxWidth: true },
});
