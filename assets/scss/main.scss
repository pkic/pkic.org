// required to get $orange variable, and other functions and mixins
@import "bootstrap/functions";
@import "bootstrap/variables";

// --- PKIC Variable Overrides & Custom Colors ---

// Default Bootstrap colors
$green: rgb(25, 135, 84);
$orange: rgb(237, 125, 49);
$blue: rgb(90, 155, 213);
$yellow: rgb(255, 192, 0);
$red: rgb(220, 53, 69);
$purple: rgb(111, 66, 193);

// Extended Palette - Light & Dark Variants
$green-light: rgb(40, 167, 69);
$green-dark: rgb(20, 108, 67);
$green-pale: rgb(212, 237, 218);
$green-deep: rgb(15, 81, 50);

$orange-light: rgb(253, 159, 83);
$orange-dark: rgb(189, 100, 39);
$orange-pale: rgb(255, 230, 204);
$orange-deep: rgb(150, 75, 29);

$blue-light: rgb(129, 181, 224);
$blue-dark: rgb(72, 124, 170);
$blue-pale: rgb(214, 234, 248);
$blue-deep: rgb(54, 93, 128);

$yellow-light: rgb(255, 220, 77);
$yellow-dark: rgb(204, 153, 0);
$yellow-pale: rgb(255, 248, 204);
$yellow-deep: rgb(153, 115, 0);

$red-light: rgb(248, 115, 131);
$red-dark: rgb(176, 42, 55);
$red-pale: rgb(248, 215, 218);
$red-deep: rgb(132, 32, 41);

$purple-light: rgb(147, 112, 219);
$purple-dark: rgb(89, 53, 154);
$purple-pale: rgb(230, 221, 243);
$purple-deep: rgb(67, 40, 116);

// Additional Complementary Colors
$teal: rgb(32, 201, 151);
$coral: rgb(255, 127, 80);
$indigo: rgb(102, 126, 234);
$amber: rgb(255, 193, 7);
$rose: rgb(233, 30, 99);
$violet: rgb(156, 39, 176);

// Neutral Supporting Colors
$gray-100: rgb(248, 249, 250);
$gray-200: rgb(233, 236, 239);
$gray-300: rgb(206, 212, 218);
$gray-400: rgb(173, 181, 189);
$gray-500: rgb(108, 117, 125);
$gray-600: rgb(73, 80, 87);
$gray-700: rgb(52, 58, 64);
$gray-800: rgb(33, 37, 41);
$gray-900: rgb(13, 27, 42);

// Map of all colors for easy use
$pkic-colors-map: (
    "green": $green,
    "orange": $orange,
    "blue": $blue,
    "yellow": $yellow,
    "red": $red,
    "purple": $purple,
    "green-light": $green-light,
    "green-dark": $green-dark,
    "green-pale": $green-pale,
    "green-deep": $green-deep,
    "orange-light": $orange-light,
    "orange-dark": $orange-dark,
    "orange-pale": $orange-pale,
    "orange-deep": $orange-deep,
    "blue-light": $blue-light,
    "blue-dark": $blue-dark,
    "blue-pale": $blue-pale,
    "blue-deep": $blue-deep,
    "yellow-light": $yellow-light,
    "yellow-dark": $yellow-dark,
    "yellow-pale": $yellow-pale,
    "yellow-deep": $yellow-deep,
    "red-light": $red-light,
    "red-dark": $red-dark,
    "red-pale": $red-pale,
    "red-deep": $red-deep,
    "purple-light": $purple-light,
    "purple-dark": $purple-dark,
    "purple-pale": $purple-pale,
    "purple-deep": $purple-deep,
    "teal": $teal,
    "coral": $coral,
    "indigo": $indigo,
    "amber": $amber,
    "rose": $rose,
    "violet": $violet,
    "gray-100": $gray-100,
    "gray-200": $gray-200,
    "gray-300": $gray-300,
    "gray-400": $gray-400,
    "gray-500": $gray-500,
    "gray-600": $gray-600,
    "gray-700": $gray-700,
    "gray-800": $gray-800,
    "gray-900": $gray-900,
);

// Map Bootstrap's theme colors to your custom colors
$primary: $green;
$secondary: $gray-600;
$success: $green;
$info: $blue;
$warning: $yellow;
$danger: $red;
$light: $gray-100;
$dark: $gray-800;

// Override Bootstrap link colors
$link-color: $primary;
$link-hover-color: $primary;

// Import Bootstrap after all custom variables and overrides
@import "bootstrap/bootstrap";

// CSS Custom Properties for easy use (this section was missing semicolons and had a typo)
:root {
  // Use Sass variables to define CSS custom properties
  @each $name, $value in $pkic-colors-map {
    --#{$name}: #{$value};
  }
}

// Example gradient combinations
.gradient-sunset {
  background: linear-gradient(135deg, $orange 0%, $red 50%, $purple 100%);
}

.gradient-ocean {
  background: linear-gradient(135deg, $blue 0%, $teal 50%, $green 100%);
}

.gradient-warm {
  background: linear-gradient(135deg, $yellow 0%, $orange 50%, $coral 100%);
}

.gradient-cool {
  background: linear-gradient(135deg, $purple 0%, $blue 50%, $teal 100%);
}

.gradient-nature {
  background: linear-gradient(135deg, $green-light 0%, $green 50%, $green-dark 100%);
}

// --- Custom PKIC Colors for up to 16 Locations ---

// This map holds the single-color locations
$pkic-colors: (
  "location-0": $green,
  "location-1": $blue,
  "location-2": $orange,
  "location-3": $red,
  "location-4": $purple,
  "location-5": $teal,
);

// This map holds the gradient locations
$pkic-gradients: (
  "location-6": linear-gradient(135deg, $indigo 0%, $gray-900 100%),
  "location-7": linear-gradient(135deg, $coral 0%, $gray-900 100%),
  "location-8": linear-gradient(135deg, $amber 0%, $gray-900 100%),
  "location-9": linear-gradient(135deg, $violet 0%, $gray-900 100%),
  "location-10": linear-gradient(135deg, $green-dark 0%, $gray-900 100%),
  "location-11": linear-gradient(135deg, $blue-dark 0%, $gray-900 100%),
  "location-12": linear-gradient(135deg, $orange-dark 0%, $gray-900 100%),
  "location-13": linear-gradient(135deg, $red-dark 0%, $gray-900 100%),
  "location-14": linear-gradient(135deg, $purple-dark 0%, $gray-900 100%),
  "location-15": linear-gradient(135deg, $rose 0%, $gray-900 100%),
);

// A map to hold the base color for gradients
$pkic-gradient-colors: (
  "location-6": $indigo,
  "location-7": $coral,
  "location-8": $amber,
  "location-9": $violet,
  "location-10": $green-dark,
  "location-11": $blue-dark,
  "location-12": $orange-dark,
  "location-13": $red-dark,
  "location-14": $purple-dark,
  "location-15": $rose,
);

// Function to get color variables
@function pkic-color($key) {
  @if map-has-key($pkic-colors, $key) {
    @return map-get($pkic-colors, $key);
  } @else if map-has-key($pkic-gradient-colors, $key) {
    @return map-get($pkic-gradient-colors, $key);
  } @else {
    @return null;
  }
}

// Function to get background (color or gradient)
@function pkic-bg($key) {
  @if map-has-key($pkic-gradients, $key) {
    @return map-get($pkic-gradients, $key);
  } @else {
    @return pkic-color($key);
  }
}

// --- General Styles ---

// import font(s)
@import url(https://fonts.googleapis.com/css?family=Roboto:400,300,700);

h1,
h2,
h3,
h4,
h5,
h6 {
  scroll-margin-top: 60px;
}
div {
  scroll-margin-top: 150px;
}

html,
body {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  font-family: 'Roboto', sans-serif !important;
}

table {
  @extend .table;
  @extend .table-bordered;
  @extend .table-striped;
  @extend .table-hover;

  text-align: left;
  width: 100%;
  margin-top: 1.6em;
}

thead {
  @extend .table-dark;
}

main {
  flex: 1;
}

#sidebar {
  color: rgba(107, 107, 107, 0.849);
}

#sidebar a {
  color: currentColor;
}

#participate {
  color: #fff;
  text-align: center;
  font-size: 1.6em;
  font-weight: 200 !important;
}

#participate a {
  color: currentColor;
}

.member-logo {
  margin: 20px;
  margin-right: 30px;
  margin-left: 30px;
  height: 40px;
  max-width: 175px;
  filter: grayscale(1) opacity(0.6) contrast(0.5);
}

.members a,
a:hover,
.member-logo:hover {
  filter: none;
  text-decoration: none;
}

.linkArea {
  color: currentColor;
  text-decoration: none;
}

.bd-placeholder-img {
  font-size: 1.125rem;
  text-anchor: middle;
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
}

figure,
#content > p > img {
  margin: 2rem;
  text-align: center;
}

figure > img,
#content > p > img {
  max-width: 80%;
}

figcaption,
figcaption h4 {
  font-size: 70%;
  text-align: center !important;
}

blockquote {
  font-size: 1.3em;
  margin-left: -1.2em;
  font-weight: 400 !important;
  font-style: italic;
  color: #555555;
  padding: 1.2em 30px 1.2em 75px;
  border-left: 8px solid rgb(33, 37, 41);
  line-height: 1.6;
  position: relative;
  background: #efefef;
}

blockquote::before {
  font-family: Arial;
  content: "\201C";
  color: rgb(33, 37, 41);
  font-size: 4em;
  position: absolute;
  left: 10px;
  top: -10px;
}

blockquote::after {
  content: '';
}

blockquote h4 {
  display: block;
  color: #333333;
  font-style: normal;
  font-weight: bold;
  margin-top: 1em;
}

.callout-warning {
  font-size: 1em;
  color: rgb(200, 0, 0);
  margin-left: 0em;
  border-left: 8px solid rgb(200, 0, 0);
  background: rgba(200, 0, 0, 0.2);
}

.callout-warning::before {
  margin-left: 10px;
  line-height: 1em;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='rgb(200, 0, 0)' class='bi bi-exclamation-triangle' viewBox='0 0 16 16'%3E%3Cpath d='M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z'/%3E%3Cpath d='M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z'/%3E%3C/svg%3E");
}

.callout-info {
  font-size: 1em;
  color: rgb(160, 140, 0);
  margin-left: 0em;
  border-left: 8px solid rgb(255, 225, 0);
  background: rgba(255, 225, 0, 0.2);
}

.callout-info::before {
  margin-left: 10px;
  line-height: 1em;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='rgb(160, 140, 0)' class='bi bi-info-circle' viewBox='0 0 16 16'%3E%3Cpath d='M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z'/%3E%3Cpath d='m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z'/%3E%3C/svg%3E");
}

.highlight > pre {
  padding: 1.5rem;
}

main h2 {
  text-align: left;
  font-size: 1.6em;
  padding-top: 1em;
  font-weight: 500 !important;
}

main h3 {
  text-align: left;
  font-size: 1.2em;
  padding-top: 1em;
  font-weight: 500 !important;
}

main h4 {
  text-align: left;
  font-size: 1.1em;
  padding-top: 1em;
  font-weight: 500 !important;
}

.banner {
  animation: scroller 60s linear 0.01s infinite;
}

@include media-breakpoint-up(xs) {
  .agenda-time {
    width: 90px;
    min-width: 90px;
  }

  .agenda-content {
    width: 500px;
    min-width: 500px;
  }
}

@include media-breakpoint-up(lg) {
  .agenda-time {
    width: 100px;
    min-width: 100px;
  }

  .agenda-content {
    width: 570px;
    min-width: 570px;
  }
}

#agenda-tabs .nav-link {
  background: var(--bs-success-bg-subtle);
}
#agenda-tabs .active {
  background: var(--bs-light);
  font-weight: bold;
}

@keyframes scroller {
  0% {
    opacity: 0;
    transform: translate(0, 0);
  }

  5% {
    opacity: 1;
    transform: translate(0, 0);
  }

  95% {
    opacity: 1;
    transform: translate(-225%, 0);
  }

  100% {
    opacity: 0;
  }
}

@media (min-width: 768px) {
  .bd-placeholder-img-lg {
    font-size: 3.5rem;
  }
}

self-assessment {
  --pkimm-sticky-top-offset: 56px;
}

// Check from here if all styles are actually used, removed everything that is not used in agenda.html

// Agenda fullscreen functionality
.agenda-fullscreen {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  background: white !important;
  z-index: 1055 !important;
  overflow: auto !important;
  padding: 1rem !important;
  box-sizing: border-box !important;
}

// Agenda Grid System
.agenda-grid-container {
  width: 100%;
  overflow-x: auto;
}

.agenda-grid {
  display: grid;
  gap: 0.5rem;
  width: 100%;
  grid-template-columns: 100px 1fr;

  @for $i from 2 through 10 {
    &[data-locations="#{$i}"] {
      grid-template-columns: 100px repeat($i, 1fr);
    }
  }

  &[data-locations="6"],
  &[data-locations="7"],
  &[data-locations="8"],
  &[data-locations="9"],
  &[data-locations="10"] {
    grid-template-columns: 100px repeat(6, 160px);
    min-width: calc(100px + 960px + 3rem);
  }
}

// Time styling
.agenda-time {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0.5rem 0.25rem;
}

.time-main {
  font-size: 1.3rem;
  font-weight: 700;
  color: #212529;
  margin-bottom: 0.25rem;
}

.time-local {
  font-size: 0.7rem;
  color: #6c757d;
  text-align: center;
}

// Session and break styling
.agenda-session {
  min-height: 120px;

  &.hidden {
    display: none;
  }
}

.session-card,
.mobile-session-card {
  border: 2px solid var(--location-border, #dee2e6);
  border-radius: 8px;
  background: var(--location-bg, white); // Updated to use var
  cursor: pointer;
  transition: all 0.2s ease;
  overflow: hidden;

  &:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    border-color: var(--location-color, #{$primary});
  }
}

.session-card {
  height: 100%;
  display: flex;
  flex-direction: column;

  &:hover {
    transform: translateY(-2px);
  }
}

.mobile-session-card {
  margin-bottom: 1rem;
}

.session-content,
.mobile-session-content {
  padding: 1rem;
  display: flex;
  flex-direction: column;
}

.session-content {
  height: 100%;
}

.session-title {
  font-size: 1.1rem;
  font-weight: 700;
  line-height: 1.3;
  margin-bottom: 0.75rem;
  color: var(--location-text-color, #212529); // Updated to use var
  flex-shrink: 0;
}

.session-speakers,
.mobile-speakers {
  margin-bottom: 0.75rem;
  flex-shrink: 0;
}

.mobile-speakers {
  margin: 0.75rem 0;
}

.speaker-info,
.mobile-speaker {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;

  &:last-child {
    margin-bottom: 0;
  }
}

.speaker-avatar,
.mobile-speaker-avatar {
  border-radius: 50%;
  flex-shrink: 0;
}

.speaker-avatar {
  width: 32px;
  height: 32px;
}

.mobile-speaker-avatar {
  width: 28px;
  height: 28px;
}

.speaker-initial {
  background: var(--location-color, #{$primary});
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
  font-weight: 600;
}

.speaker-details,
.mobile-speaker-info {
  flex-grow: 1;
  min-width: 0;
}

.mobile-speaker-info {
  flex-direction: column;
}

.speaker-name {
  font-weight: 600;
  font-size: 0.85rem;
  color: var(--location-color, #{$primary});
}

.speaker-role {
  font-size: 0.75rem;
  color: var(--location-text-color-secondary, #6c757d); // Updated to use var
}

.session-preview-wrapper {
  flex-grow: 1;
}

.session-preview-gradient,
.mobile-session-preview {
  font-size: 0.8rem;
  color: var(--location-text-color-secondary, #6c757d); // Updated to use var
  margin: 0;
  overflow: hidden;
}

.mobile-session-preview {
  font-size: 0.85rem;
  line-height: 1.4;
  margin-top: 0.75rem;
}

.agenda-break {
  display: flex;
  align-items: center;
  justify-content: center;
}

.break-card,
.mobile-break {
  background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
  color: white;
  padding: 1rem;
  border-radius: 8px;
  text-align: center;
  font-weight: 600;
  font-size: 1.1rem;
}

.break-card {
  width: 100%;
}

.mobile-break {
  margin-bottom: 1rem;
}

// Location-specific styles using a loop
@each $location, $color in $pkic-colors {
  .#{$location},
  .#{$location}-session {
    --location-color: #{$color};
    --location-bg: #{rgba($color, 0.1)};
    --location-border: #{rgba($color, 0.3)};
    --location-text-color: #212529;
    --location-text-color-secondary: #6c757d;
  }

  .#{$location}-modal .modal-header {
    background: linear-gradient(135deg, #{$color} 0%, #{darken($color, 15%)} 100%);
    color: white;
    border-bottom: none;
    padding: 1.5rem;
  }
}

@each $location, $gradient in $pkic-gradients {
  $base-color: map-get($pkic-gradient-colors, $location);
  .#{$location},
  .#{$location}-session {
    --location-color: #{$base-color};
    --location-bg: #{$gradient};
    --location-border: #{rgba($base-color, 0.5)};
    --location-text-color: white;
    --location-text-color-secondary: #{lighten($base-color, 20%)};
  }

  // Set the header gradient for the modal
  .#{$location}-modal .modal-header {
    background: #{$gradient};
    color: white;
    border-bottom: none;
    padding: 1.5rem;
  }
}

// Mobile layout
.mobile-agenda {
  padding: 0.5rem 0;
}

.mobile-time-row {
  margin-bottom: 1rem;
}

.mobile-time {
  text-align: left;
  padding: 0.5rem 0;
  border-bottom: 2px solid #e9ecef;
}

.mobile-location-badge {
  background: var(--location-color, #{$primary});
  color: white;
  padding: 0.5rem 1rem;
  font-size: 0.8rem;
  font-weight: 600;
}

// Location filter buttons
.location-filters {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
  justify-content: center;
}

.location-filter-btn {
  background: var(--location-bg, #{rgba($primary, 0.1)});
  color: var(--location-color, #{$primary});
  border: 2px solid var(--location-border, #{rgba($primary, 0.3)});
  padding: 0.4rem 0.8rem;
  border-radius: 6px;
  font-size: 0.8rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;

  &:hover,
  &.active {
    background: var(--location-color, #{$primary});
    color: white;
  }

  &.active {
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);

    &::after {
      content: 'âœ“';
      position: absolute;
      top: -0.3rem;
      right: -0.3rem;
      background: white;
      color: var(--location-color, #{$primary});
      border-radius: 50%;
      width: 1.2rem;
      height: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      font-weight: bold;
      border: 2px solid var(--location-color, #{$primary});
    }
  }
}

// Modal styling - simplified
.session-modal .modal-content {
  border: none;
  border-radius: 12px;
  overflow: hidden;
}

.modal-title-container {
  flex-grow: 1;
}

.session-meta {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
}

.time-badge-modal,
.location-badge-modal {
  background: rgba(255, 255, 255, 0.2);
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.85rem;
  font-weight: 500;
}

.section-title {
  color: var(--location-color, #{$primary});
  font-weight: 600;
  font-size: 1.1rem;
  margin-bottom: 1rem;
  border-bottom: 2px solid var(--location-border, #{rgba($primary, 0.1)}); // Updated to use var
  padding-bottom: 0.5rem;
}

.session-description {
  line-height: 1.6;
}

.speaker-card {
  display: flex;
  gap: 1rem;
  padding: 1.5rem;
  border: 2px solid var(--location-border, #f8f9fa); // Updated to use var
  border-radius: 8px;
  background: var(--location-bg-subtle, #f8f9fa); // Added new variable for background

  &:hover {
    border-color: var(--location-color, #{rgba($primary, 0.3)});
    background: var(--location-bg-hover, #{rgba($primary, 0.02)}); // Added new variable for hover background
  }
}

.speaker-photo {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  flex-shrink: 0;
}

.speaker-initial-large {
  background: var(--location-color, #{$primary});
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.8rem;
  font-weight: 600;
}

.speaker-info-card {
  flex-grow: 1;
}

.speaker-name-card {
  color: var(--location-color, #{$primary});
  font-weight: 700;
}

.speaker-title-card {
  color: var(--location-text-color-secondary, #6c757d); // Updated to use var
  font-weight: 500;
  margin-bottom: 0.75rem;
}

.speaker-bio {
  margin-bottom: 1rem;
  line-height: 1.5;
}

// Responsive design - consolidated
@include media-breakpoint-down(lg) {
  .agenda-grid {
    @for $i from 1 through 10 {
      &[data-locations="#{$i}"] {
        @if $i < 3 {
          grid-template-columns: 100px repeat($i, minmax(250px, 1fr));
        } @else {
          grid-template-columns: 100px repeat(3, 200px);
          min-width: calc(100px + 600px + 1.5rem);
        }
      }
    }
  }

  .time-main {
    font-size: 1rem;
  }

  .session-title {
    font-size: 0.9rem;
  }

  .speaker-avatar {
    width: 28px;
    height: 28px;
  }

  .speaker-name {
    font-size: 0.8rem;
  }

  .speaker-role {
    font-size: 0.7rem;
  }
}

@include media-breakpoint-down(md) {
  .agenda-grid {
    grid-template-columns: 80px 1fr;
    gap: 0.25rem;
  }

  .agenda-session {
    margin-bottom: 0.5rem;

    &:empty {
      display: none;
    }
  }

  .session-content {
    padding: 0.75rem;
  }

  .time-main {
    font-size: 0.9rem;
  }

  .time-local {
    font-size: 0.7rem;
  }
}

@import "sponsors";